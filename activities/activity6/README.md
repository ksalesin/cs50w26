# Activity: Memory games

## 1. Show 'em

Copy the `activity6-1.c` file from the examples folder into a new directory called `memorygames` in your `~/` on plink 
and then `cd` into that directory.

In place of the comments in the `showx` and `showy` functions, 
add code to print out the address of the `x` and `y` variables, 
respectively. *Hint*: use `%p` to print out pointer values.

Note: the compiler will warn you about unused variables. We will ignore it in this exercise. In real-world projects, unused variables are to be avoided since they reduce readability and may cause confusion or even bugs.

Do you notice anything unexpected about the resulting output? 
Can you explain it?


---

## 2. swapping pointers

Copy the `activity6-2.c` file from the examples directory into the `memorygames` directory on plink.

The `swap_nums` function seems to work, but the `swap_pointers` 
functions does not. Can you fix it?

*Note: This question was based on an exercise from a CS class at Villanova.*

---

## 3. Buggy `stringcat`
Copy the `stringcat.c` file from the examples directory into `~/memorygames`.

The code is buggy and triggers a *stack smashing detected!* error and crashes.

Study the code and answer the following questions in your markdown. 

1. Explain the pointer notation used in the parameters.
2. Explain the pointer notation used in the first while loop condition.
3. Explain what the two loops accomplish.
4. Why is there an assignment after the loop?
5. Where is the bug in `main()`?
6. What might go wrong inside `stringcat`?

```c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void stringcat( char *sp, char *dp);

int main()
{
  // initialize the first few characters of the arrays
  char src[8]  = "CS50";
  char dest[8] = "abcdef";

  printf( "dest started as: \"%s\"\n", dest);

  stringcat(src, dest);
  printf("src  = '%s'\n", src);
  printf("dest = '%s'\n", dest);
  return 0;
}

/* stringcat - cat string from source sp onto destination dp */
void stringcat(char *sp, char *dp)
{
  while (*dp)
	  ++dp;

  while (*sp != '\0') {
    *dp++ = *sp++;
  }
  *dp = '\0';
}
```

<!--
For those who have already read/watched the [knowledge unit about gdb](../gdb/index.html), you can use `gdb` to inspect the state of the process when it crashed:

```bash
$ ulimit -c unlimited
$ mygcc stringcat.c -o stringcat
$ ./stringcat
dest started as: "abcdef"
src  = 'CS50'
dest = 'abcdefCS50'
*** stack smashing detected ***: terminated
Aborted (core dumped)
$ # find your UID's most recent coredump file
and save it in an shell variable
$ export coredump=$(ls -t /var/lib/apport/coredump/*$UID* | head -1)
$ echo $coredump
/var/lib/apport/coredump/core._thayerfs_home_d29265d_cs50-dev_tmp_aa.180338.158d32c0-568a-41f4-87c5-b9e0f11465d2.4081512.220718009
$ gdb stringcat $coredump
...
Reading symbols from stringcat...
[New LWP 4113919]
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
Core was generated by `./stringcat`.
Program terminated with signal SIGABRT, Aborted.
...
(gdb) 

```
-->

## 4. Reverse the string arguments

Write a small C function `flip` that:

1. Takes a pointer to char as its only argument
2. Prints the string pointed to, then prints the same string backwards
3. The function may have only one other variable, a pointer 
to char, and the only function it can call is `printf`

Here's the `main` program to test your `flip` function:

```c
include <stdio.h>

void flip (char *);

int main()
{
    /* strings is an array of pointers to char */
    char *strings[] = {"this", "is", "a", "test"};
    int i;

    for (i=0; i<(sizeof(strings)/sizeof(char*)); ++i) {
        flip(strings[i]);
    }
    return 0;
}

void flip(char *p)
{
  char *q;

  /***********************/
  /* your code goes here */
  /***********************/

  return;
}

```
