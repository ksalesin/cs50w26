<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CS 50 | Activity</title>
    <link rel="stylesheet" href="/~ksalesin/cs50/styles.css">
    <link rel="stylesheet" href="/~ksalesin/cs50/github-markdown.css">
</head>
<body>
    <div class="markdown-body nav">
        <h3><a href="/~ksalesin/cs50/" id="cs50">CS 50: Software Design and Implementation (Winter 2026)</a></h3>
        <ul>
            <li><a href="/~ksalesin/cs50/syllabus.html">Syllabus</a></li>
            <li><a href="/~ksalesin/cs50/schedule.html">Schedule</a></li>
            <li><a href="/~ksalesin/cs50/style.html">Style Guide</a></li>
            <li><a href="/~ksalesin/cs50/resources.html">Resources</a></li>
            <li id="knowledge-base"><a href="http://spongium.org/" target="_blank">Knowledge Base</a></li>
        </ul>
    </div>
    <div class="markdown-body content">
        <h1>Activity 12: Fix memory bugs with valgrind (and maybe gdb)</h1>
<p>Add the following alias to your <code>.bashrc</code> file:</p>
<pre><code class="language-bash">alias myvalgrind='valgrind --leak-check=full --show-leak-kinds=all'
</code></pre>
<p>so that we can run valgrind on a program <code>labx</code> like so:</p>
<pre><code class="language-bash">myvalgrind labx arg1 arg2 ...
</code></pre>
<p>Note that unlike <code>gdb</code>, you <em>do</em> provide the arguments to the program under test when starting <code>valgrind</code>.</p>
<p>Here's a handy <a href="https://bytes.usc.edu/cs103/wiki/valgrind.html">quick reference for valgrind</a> from USC.</p>
<p>Remember that the <code>~/.bashrc</code> file is run when you log in to plink, so you can either log out and log back in for the changes to take effect, or you can run <code>source ~/.bashrc</code> to re-run it manually.</p>
<h2>Activity</h2>
<p>You can find the examples for this activity in the <code>valgrindit</code> directory within our examples.
Copy these to your own directory on plink.</p>
<p>Remember to upload your markdown to Canvas for this activity.</p>
<p><em>Some of the examples for this activity come from the RedHat education group.</em></p>
<h3>Part A</h3>
<p>Each of the example programs v1, v2, v3 compile with no errors or warnings.
However, some have memory leaks and don't quite work as we
expect. Use the <code>valgrind</code> tool to investigate why and add your findings to your markdown file.</p>
<!-- - v1
- v2
- v3
- v4
- v5 hint: try an eight character username and a three character nickname. -->
<h3>Part B</h3>
<p>You may find both gdb and valgrind useful for this part.</p>
<p>Now <code>cd bagbugs</code> and run <code>make</code>. The <code>bugs</code> executable is generated from <code>bagbugstest.c</code>, which is a test program for <code>bagbugs</code>.
Look in <code>bagbugstest.c</code> to see what it's testing.</p>
<p>If you run <code>bugs</code>, you will see that the first few tests run smoothly. However, on <code>bag_insert</code> the test program has a problem. Figure out the problem, describe it in your markdown file, and fix it.</p>
<p>Repeat for all problems until all the tests pass.</p>

    </div>
</body>
<script src="/~ksalesin/cs50/_includes/spoilers.js"></script>
</html>